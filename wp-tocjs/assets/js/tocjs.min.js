!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,i,n){"use srtict";var l=function(t,e){return t=e+". "+t},o=function(t){return t>0?"-"+t:""};t.fn.tocjs=function(e){return e=t.extend({excludes:"toc-exclude",headingNumber:!0,headings:"h2, h3",includes:"",min:4,output:".toc",title:"Contents",titleElement:"h2",tocNumber:!0},e),this.each(function(){var i,n,u,c,s,r,a=[0],d=!1,h=[];n=t("<div>"),u=e.headings.replace(/　/g,"").replace(/\s/g,""),c=u.split(","),c.sort(),s=e.excludes.replace(/\./g,"").replace(/\,/g," ").replace(/　/g,"").replace(/\s+/," "),includes=t.trim(e.includes),e.title&&($title=t("<"+e.titleElement+">",{class:"toc-heading",text:e.title}),n.prepend($title)),$list=t("<ul>",{class:"toc-list"}),i=includes?t(this).find(includes):t(this).find(u).not(".toc-heading"),i.each(function(){var i,n,u,p,m,f,g=t(this).prop("tagName").toLowerCase(),x=t(this).html();for(i=0;i<c.length;i++)if(g===c[i]){if(!1!==d&&d<i)return;if(d=!1,t(this).hasClass(s))return void(d=i);for(a[i]++,i!==c.length-1&&(a[i+1]=0),n=0;n<a.length;n++)0===n?m=a[n]:m+=o(a[n]);p="toc-item-"+m,u="toc-item toc-item-"+(i+1),t(this).attr("id",p),e.headingNumber&&(f=l(x,m),t(this).html(f)),e.tocNumber&&(x=l(x,m)),r=h.push('<li class="'+u+'"><a href="#'+p+'">'+x+"</a></li>")}}),r>=e.min&&($list.append(h),n.append($list),outputHtml=n.html(),t(e.output).append(outputHtml))})}});